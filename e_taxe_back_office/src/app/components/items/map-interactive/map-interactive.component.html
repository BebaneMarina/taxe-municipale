<div class="map-container">
  <!-- ContrÃ´les de la carte -->
  <div class="map-controls bg-white p-6 rounded-xl shadow-xl mb-6 border border-gray-200">
    <h3 class="text-lg font-semibold mb-4">ContrÃ´les de la carte</h3>
    
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <!-- Filtres d'affichage -->
      <div class="space-y-2">
        <label class="flex items-center gap-2 cursor-pointer">
          <input 
            type="checkbox" 
            [(ngModel)]="showContribuables"
            (change)="toggleContribuables()"
            class="rounded"
          >
          <span class="text-sm font-medium">ğŸ“ Contribuables</span>
        </label>
        <label class="flex items-center gap-2 cursor-pointer">
          <input 
            type="checkbox" 
            [(ngModel)]="showCollecteurs"
            (change)="toggleCollecteurs()"
            class="rounded"
          >
          <span class="text-sm font-medium">ğŸ‘¤ Collecteurs</span>
        </label>
        <label class="flex items-center gap-2 cursor-pointer">
          <input 
            type="checkbox" 
            [(ngModel)]="showZones"
            (change)="toggleZones()"
            class="rounded"
          >
          <span class="text-sm font-medium">ğŸ—ºï¸ Zones</span>
        </label>
        <label class="flex items-center gap-2 cursor-pointer">
          <input 
            type="checkbox" 
            [(ngModel)]="showUncoveredZones"
            (change)="toggleUncoveredZones()"
            class="rounded"
          >
          <span class="text-sm font-medium">âš ï¸ Zones non couvertes</span>
        </label>
        <label class="flex items-center gap-2 cursor-pointer">
          <input 
            type="checkbox" 
            [(ngModel)]="filterActif"
            (change)="onFilterChange()"
            class="rounded"
          >
          <span class="text-sm font-medium">Actifs uniquement</span>
        </label>
        <label class="flex items-center gap-2 cursor-pointer">
          <input 
            type="checkbox" 
            [(ngModel)]="autoRefresh"
            (change)="onAutoRefreshChange()"
            class="rounded"
          >
          <span class="text-sm font-medium">ğŸ”„ Actualisation auto ({{ refreshIntervalSeconds }}s)</span>
        </label>
      </div>

      <!-- Statistiques -->
      <div class="text-sm">
        <p class="font-semibold mb-2">Statistiques</p>
        <p>Contribuables: <span class="font-bold text-main">{{ contribuables.length }}</span></p>
        <p>Collecteurs: <span class="font-bold text-blue-600">{{ collecteurs.length }}</span></p>
        <p>Zones: <span class="font-bold text-green-600">{{ zonesGeographiques.length }}</span></p>
        <p>Zones non couvertes: <span class="font-bold text-red-600">{{ uncoveredZonesData.length }}</span></p>
      </div>

      <!-- Actions -->
      <div>
        <button 
          (click)="loadData()"
          [disabled]="loading"
          class="px-4 py-2 bg-main text-white rounded-lg hover:bg-main/90 disabled:opacity-50 transition"
        >
          @if (loading) {
            <span>Chargement...</span>
          } @else {
            <span>Actualiser</span>
          }
        </button>
      </div>
    </div>
  </div>

  <!-- Carte -->
  <div id="map" class="map-view"></div>
</div>
